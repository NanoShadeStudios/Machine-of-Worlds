# Phase 2 Plan: Expanding Mechanics & Strategic Depth (Improved)

**Goal**: Introduce interacting systems, deeper RNG effects, more world variety, and advanced progression without breaking the Phase 1 structure.

## 1. Enhanced World Property System

### Current Properties Enhanced:
- **Gravity (0.5-2.5x)**: Now affects both Heat generation AND Pressure buildup
- **Time Speed (0.3-2.0x)**: Affects Fuel generation AND Energy decay rate
- **Temperature (-50°C to 150°C)**: 
  - Hot worlds (>75°C): Heat generation +25%, but Stability -1 per action
  - Cold worlds (<0°C): Fuel efficiency +20%, but Energy generation -15%
  - Moderate (0-75°C): No penalties, +10% Stability generation
- **Atmosphere (0-100%)**: 
  - High atmosphere (>70%): Pressure +2 per action, Heat efficiency +15%
  - Low atmosphere (<30%): Energy generation +30%, but resource decay +5%
  - Medium atmosphere: Balanced bonuses

### Weather Effects (Temporary, 5-10 actions):
- **Stormy**: Fuel +50%, Energy +25%, Stability -2 per action
- **Calm**: All generation +15%, Stability +1 per action
- **Chaotic**: Random resource spikes (±25-75%), Stability -3 per action
- **Serene**: Energy costs reduced by 30%, Stability +2 per action
- **Turbulent**: Pressure +100%, but Heat generation -20%

## 2. New Resources & Interaction Formulas

### New Resources:
- **Pressure**: 0-100 range, generated by high-gravity/high-atmosphere worlds
  - Formula: Base 2 + (Gravity × 3) + (Atmosphere/25) per action
  - Decays by 5% per world change
- **Energy**: 0-200 range, generated by combining resources
  - Formula: (Heat + Fuel) / 4, costs 10 Heat + 15 Fuel to generate
  - Decays by Time Speed multiplier each action
- **Stability**: 0-50 range, affects RNG outcomes
  - Formula: Base 1 per action, modified by world conditions
  - High Stability (>30): +25% to all positive RNG events
  - Low Stability (<10): +50% chance for negative events, but also +75% rare bonuses

### Resource Interactions:
- **Heat + Pressure Combo**: If Pressure >40, Heat generation +30%
- **Fuel + Energy Combo**: Spend 20 Energy to double next Fuel action
- **Stability Threshold**: At 35+ Stability, unlock "Stable Fusion" action (costs 25 Heat + 25 Fuel, gives 50 Energy)

### UI Layout for Resources:
```
Current Resources Panel (expand from 2 to 5 resources):
┌─────────────────────────┐
│ Resources               │
├─────────────────────────┤
│ Heat: 245 [▓▓▓▓▓░░] ⚡ │ ← Shows heat+pressure combo active
│ Fuel: 189 [▓▓▓▓░░░]    │
│ Pressure: 67/100 ⬆️    │ ← Shows increasing/decreasing trend
│ Energy: 23/200 ⚡ ⏰    │ ← Shows decay timer
│ Stability: 31/50 🛡️    │ ← Shows protection level
└─────────────────────────┘
```

## 3. Advanced Upgrades with Specific Numbers

### Cross-Resource Upgrades (New category):
- **Thermal Accelerator**: 8 levels, base cost 50 Heat + 30 Pressure
  - Effect: Heat Generator efficiency +(level × 5)% when Pressure >20
  - Cost scaling: Base × 1.6^level
- **Pressure Regulator**: 6 levels, base cost 40 Fuel + 25 Energy
  - Effect: Pressure generation +(level × 3), max pressure +(level × 10)
  - Unlocks at: 5 worlds created + Heat Generator level 5
- **Energy Synthesizer**: 10 levels, base cost 60 Heat + 40 Fuel
  - Effect: Energy generation efficiency +(level × 8)%, decay -(level × 2)%
  - Unlocks at: 100 total Energy generated
- **Stability Core**: 5 levels, base cost 100 Heat + 80 Fuel + 50 Energy
  - Effect: Base stability +(level × 2), negative event resistance +(level × 10)%
  - Unlocks at: 3 negative events survived

### UI Layout for Advanced Upgrades:
```
Upgrades Panel (expand with tabs):
┌─────────────────────────┐
│ [Basic] [Cross] [Spec]  │ ← Tabs for upgrade categories
├─────────────────────────┤
│ Cross-Resource Upgrades │
│                         │
│ Thermal Accelerator     │
│ Lv 3/8 [▓▓▓░░░░░] 🔥⚡  │
│ Effect: +15% when P>20  │
│ Cost: 183H + 110P       │
│ [UPGRADE] or [MAX LVL]  │
├─────────────────────────┤
│ Pressure Regulator      │
│ Lv 0/6 [░░░░░░] 🔒      │ ← Locked until requirements met
│ Requires: 5 worlds +    │
│           Heat Gen Lv5  │
└─────────────────────────┘
```

## 4. Detailed RNG Event System

### Event Categories with Probabilities:
- **Common Events (60% chance per world)**: Small bonuses (+10-25% to one resource for 3 actions)
- **Uncommon Events (25% chance)**: Moderate bonuses or choices (+30-50% or resource conversion options)
- **Rare Events (10% chance)**: Large bonuses or temporary abilities (+75-100% or unlock special actions)
- **Ultra Rare Events (5% chance)**: Game-changing temporary effects (double all resources for 5 actions)
- **Negative Events (15% base, reduced by Stability)**: Resource penalties or forced choices

### Specific Events:
- **"Solar Flare"** (Uncommon): Choose +75% Heat for 5 actions OR +50% Energy generation
- **"Quantum Resonance"** (Rare): Next 3 worlds have properties rerolled twice, take best
- **"System Glitch"** (Negative): Lose 20% of highest resource OR spend 30 Energy to prevent
- **"Lucky Calibration"** (Ultra Rare): All upgrades cost 50% less for next 10 purchases
- **"Dimensional Rift"** (Rare): Gain access to Tier 2 world for 1 generation (temporary unlock)
- **"Resource Surge"** (Common): Choose one resource to gain +25% generation for 3 actions
- **"Machine Overclock"** (Uncommon): All actions cost +50% resources but give +100% results for 5 actions
- **"Temporal Loop"** (Negative): Next world generation costs double resources OR skip 2 turns
- **"Crystal Resonance"** (Ultra Rare): Machine gains permanent +5% efficiency to all resources
- **"Pressure Leak"** (Negative): Lose 50% current Pressure OR spend 40 Heat to repair

### Event UI Mockup:
```
┌─────────────────────────┐
│ ⚠️  QUANTUM RESONANCE   │
│                         │
│ A strange energy field  │
│ detected! Your machine  │
│ can reroll world props. │
│                         │
│ Effect: Next 3 worlds   │
│ roll twice, take best   │
│                         │
│ [ACCEPT] [IGNORE]       │
│                         │
│ Duration: 3 worlds left │
└─────────────────────────┘
```

## 5. World Tier System with Unlock Requirements

### Tier 1 (Current): Basic Worlds
- 8 world types: Desert, Ocean, Forest, Mountain, Volcanic, Ice, Crystal, Void
- Property ranges: Gravity 0.5-2.5x, Time 0.3-2.0x
- Always available

### Tier 2: Enhanced Worlds (Unlock: 25 worlds created + all basic upgrades level 5+)
- 6 new types: Plasma, Dark Matter, Temporal, Magnetic, Quantum, Hybrid
- Property ranges: Gravity 0.2-3.5x, Time 0.1-3.0x
- Special effects: Some worlds have 2 weather types simultaneously
- **Plasma**: Temperature always >100°C, +50% Heat generation, +10 Pressure per action
- **Dark Matter**: Gravity 1.5-3.5x range, +25% all resources but -5 Stability per action
- **Temporal**: Time Speed can go negative (time reversal), unique resource interactions
- **Magnetic**: Atmosphere effects doubled, can store Energy without decay
- **Quantum**: Properties change every 3 actions, unpredictable but high rewards
- **Hybrid**: Combines 2 random Tier 1 world types, gets benefits of both

### Tier 3: Exotic Worlds (Unlock: 100 worlds + any cross-resource upgrade level 5+)
- 4 new types: Dimensional, Singularity, Living, Infinite
- Extreme property ranges: Gravity 0.1-5.0x, Time 0.05-4.0x
- Unique mechanics: Resource conversion rates, temporary resource types
- **Dimensional**: Unlocks temporary 6th resource "Reality", allows resource conversion
- **Singularity**: Extreme gravity (3.0-5.0x), can "compress" resources for massive bonuses
- **Living**: World actively responds to player actions, learns and adapts bonuses
- **Infinite**: No resource limits during generation, but requires tribute to leave

### World Unlock UI:
```
┌─────────────────────────┐
│ World Tiers             │
├─────────────────────────┤
│ ✅ Tier 1: Basic (8/8)  │
│ 🔒 Tier 2: Enhanced     │
│    Progress: 25/25 🌍   │
│    Basic Upgrades: 4/4  │ ← Shows specific requirement status
│    Requirements: ✅✅    │
│    [UNLOCK TIER 2]      │
├─────────────────────────┤
│ 🔒 Tier 3: Exotic       │
│    Progress: 43/100 🌍  │
│    Cross Upgrades: 0/1  │
│    Requirements: ❌❌    │ ← Red X shows not met
└─────────────────────────┘
```

## 6. Enhanced Machine Visualization

### New Visual Elements:
- **Resource Flow Lines**: Animated lines showing resource movement between parts
  - Heat: Red pulsing lines (pulse speed shows generation rate)
  - Fuel: Blue flowing lines (flow speed shows efficiency)
  - Pressure: Yellow thick lines (thickness shows pressure level)
  - Energy: Purple crackling lines (crackling intensity shows amount)
  - Stability: Green steady glow (brightness shows stability level)

### Machine Part Types:
- **Basic Parts** (Phase 1): Gray rectangles/circles, basic connections
- **Resource Nodes**: Colored by resource type, pulsing animation
  - Heat Nodes: Red pulsing circles
  - Fuel Nodes: Blue rotating squares
  - Pressure Nodes: Yellow expanding/contracting diamonds
  - Energy Nodes: Purple crackling stars
  - Stability Nodes: Green steady shields
- **Interaction Hubs**: Multi-colored parts where resources combine
  - Show resource symbols when active
  - Animate when interactions occur
- **Upgrade Modules**: Geometric shapes that modify nearby parts
  - Basic upgrades: Simple geometric enhancement
  - Cross-resource upgrades: Complex multi-part modules
- **Event Artifacts**: Special temporary parts from RNG events
  - Appear with unique animations
  - Fade out when event expires

### Canvas Layout Zones:
```
Machine Canvas (600x400):
┌─────────────────────────────────────┐
│ Event Zone    │ Resource Flow Zone  │ ← Top 100px for events/effects
├───────────────┼─────────────────────┤
│               │                     │
│ Main Machine  │   Upgrade Modules   │ ← Middle 200px for core machine
│ Core & Parts  │   & Interactions    │
│               │                     │
├───────────────┼─────────────────────┤
│ Status Info   │ Connection Web      │ ← Bottom 100px for connections
└─────────────────────────────────────┘
```

## 7. Advanced Actions System

### Multi-Step Actions:
- **Energy Boost**: 
  - Step 1: Cost 15 Heat + 20 Fuel → Gain 40 Energy
  - Step 2: Spend 25 Energy → +100% next resource action
  - Cooldown: 3 actions
- **Pressure Release**: 
  - Cost: 50 Pressure 
  - Choose: +75% Heat efficiency (5 actions) OR +40 Stability
  - Cannot use if Pressure <20
- **Stable Fusion**: 
  - Cost: 25 Heat + 25 Fuel + 35 Stability 
  - Result: 50 Energy + 10 Pressure + random rare bonus
  - Unlocks at: Stability 35+ sustained for 5 actions
- **Resource Conversion**:
  - Heat→Fuel: 2 Heat = 1 Fuel (10 Heat minimum)
  - Fuel→Heat: 3 Fuel = 2 Heat (15 Fuel minimum)
  - Any→Energy: (Heat+Fuel)/4 = Energy, costs original resources
- **Emergency Stabilize**:
  - Cost: 30 Heat + 30 Fuel
  - Result: Set Stability to 25, prevent next negative event
  - Only available when Stability <15

### Action UI Addition:
```
┌─────────────────────────┐
│ Advanced Actions        │
├─────────────────────────┤
│ Energy Boost            │
│ 15H + 20F → 40E         │
│ [STEP 1: CREATE ENERGY] │ ← Shows current step
│ Cooldown: Ready         │
├─────────────────────────┤
│ Pressure Release        │
│ 50P → Choice Bonus      │
│ [RELEASE] (Need 50P)    │ ← Disabled if insufficient
├─────────────────────────┤
│ Stable Fusion 🔒        │
│ Unlocks at Stability 35 │
│ Current: 31/35 (4 more) │ ← Shows unlock progress
└─────────────────────────┘
```

## 8. Comprehensive UI Layout Expansion

### Main Layout Changes:
- **Left Panel (70%)**: Machine canvas + event notifications
- **Right Panel (30%)**: Tabbed interface with:

#### Tab 1: Resources & Basic Actions
```
┌─────────────────────────┐
│ Resources & Actions     │
├─────────────────────────┤
│ Heat: 245 [▓▓▓▓▓░░] ⚡ │
│ Fuel: 189 [▓▓▓▓░░░]    │
│ Pressure: 67/100 ⬆️    │
│ Energy: 23/200 ⚡ ⏰    │
│ Stability: 31/50 🛡️    │
├─────────────────────────┤
│ Basic Actions           │
│ [Generate Heat]         │
│ [Generate Fuel]         │
│ [Create World]          │
└─────────────────────────┘
```

#### Tab 2: Upgrades (Basic/Cross/Special)
```
┌─────────────────────────┐
│ [Basic] [Cross] [Spec]  │
├─────────────────────────┤
│ Shows relevant upgrades │
│ based on selected tab   │
│ with progress bars and  │
│ unlock requirements     │
└─────────────────────────┘
```

#### Tab 3: Worlds & Tiers
```
┌─────────────────────────┐
│ World Management        │
├─────────────────────────┤
│ Current World:          │
│ [World details display] │
├─────────────────────────┤
│ Available Tiers:        │
│ [Tier unlock progress]  │
├─────────────────────────┤
│ World History:          │
│ [Last 5 worlds created] │
└─────────────────────────┘
```

#### Tab 4: Advanced Actions & Statistics
```
┌─────────────────────────┐
│ Advanced & Stats        │
├─────────────────────────┤
│ Multi-step Actions:     │
│ [Energy Boost, etc.]    │
├─────────────────────────┤
│ Statistics:             │
│ Total Resources: 1,234  │
│ Efficiency: 87%         │
│ Events Survived: 15     │
│ Machine Parts: 42       │
└─────────────────────────┘
```

### Responsive Breakpoints:
- **Desktop (>1000px)**: Side-by-side layout
- **Tablet (600-1000px)**: Stacked with collapsible sections
- **Mobile (<600px)**: Single column with expandable cards

## 9. Save System Enhancement

### Version 2 Save Structure:
```javascript
{
  version: 2,
  gameState: {
    // Phase 1 data
    worldsCreated: 47,
    resources: { heat: 245, fuel: 189 },
    upgrades: { heatGenerator: {level: 7}, fuelEfficiency: {level: 5} },
    
    // Phase 2 additions
    newResources: { pressure: 67, energy: 23, stability: 31 },
    crossUpgrades: { thermalAccelerator: {level: 3, unlocked: true} },
    worldTiers: { tier1: true, tier2: false, tier3: false },
    unlockedWorlds: ["Desert", "Ocean", "Forest", "Mountain", "Volcanic", "Ice", "Crystal", "Void"],
    activeEvents: [{ type: "solarFlare", duration: 3, effect: "heatBoost75" }],
    advancedActions: { energyBoost: {cooldown: 0}, stableFusion: {unlocked: false} },
    statistics: {
      totalResourcesGenerated: 12450,
      eventsTriggered: 28,
      negativeEventsSurvived: 3,
      efficiencyRating: 87
    }
  }
}
```

### Import/Export Feature:
- Manual export to clipboard as JSON
- Import from clipboard with validation
- Automatic backup every 10 actions
- Version migration for backward compatibility

## 10. Phase 2 Milestone Goals

### Completed When:
1. ✅ **3 new resources** integrated with specific formulas and interactions
2. ✅ **4 cross-resource upgrades** with unlock requirements and scaling costs
3. ✅ **RNG event system** with 10+ events across 4 rarity tiers
4. ✅ **2 new world tiers** with 10 new world types and unique mechanics
5. ✅ **Enhanced machine visualization** with resource flows and part types
6. ✅ **5 multi-step actions** requiring strategic resource management
7. ✅ **Tabbed UI** supporting all new features without clutter
8. ✅ **Enhanced save system** supporting all new data structures
9. ✅ **World property interactions** meaningfully affecting gameplay
10. ✅ **Progressive unlock system** creating clear advancement goals

### Success Metrics:
- **Session Length**: Players spend 30+ minutes per session making strategic decisions
- **Decision Depth**: Resource interactions create meaningful optimization choices
- **Progression Clarity**: World tier progression provides clear long-term goals
- **Visual Feedback**: Machine visualization clearly communicates all system states
- **Strategic Complexity**: Multiple valid resource management strategies exist
- **Event Engagement**: Players actively choose event responses rather than auto-accepting

### Testing Checklist:
- [ ] All new resources generate and interact correctly
- [ ] Cross-resource upgrades unlock and function as specified
- [ ] RNG events trigger with correct probabilities and effects
- [ ] World tiers unlock when requirements are met
- [ ] Machine visualization updates reflect all game state changes
- [ ] Advanced actions work correctly with cooldowns and requirements
- [ ] UI tabs organize information clearly without overwhelming players
- [ ] Save/load preserves all Phase 2 features
- [ ] Performance remains smooth with increased complexity
- [ ] Game balance maintains active engagement without frustration
