<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Machine of Worlds</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- Navigation Header -->
        <header>
            <h1>The Machine of Worlds</h1>
            <nav class="main-nav">
                <button class="nav-btn active" data-page="main">Main</button>
                <button class="nav-btn" data-page="worlds" id="worldsNavBtn">Worlds</button>
                <button class="nav-btn" data-page="options">Options</button>
                <button class="nav-btn" data-page="achievements">Achievements</button>
            </nav>
        </header>
        
        <!-- Main Page -->
        <div id="mainPage" class="page active">
            <!-- Main Game Area - Left Sidebar + Right Content -->
            <div class="main-game-layout">
                <!-- Left Sidebar: Resources -->
                <div class="resource-sidebar">
                    <h3>Resources</h3>
                    <div class="resource-list">
                        <div class="resource-item">
                            <span class="resource-label">Heat:</span>
                            <span id="heatAmount" class="resource-value">0</span>
                        </div>
                        <div class="resource-item">
                            <span class="resource-label">Fuel:</span>
                            <span id="fuelAmount" class="resource-value">0</span>
                        </div>
                        <div class="resource-item">
                            <span class="resource-label">Pressure:</span>
                            <span id="pressureAmount" class="resource-value">0</span><span class="resource-max">/100</span>
                        </div>
                        <div class="resource-item">
                            <span class="resource-label">Energy:</span>
                            <span id="energyAmount" class="resource-value">0</span><span class="resource-max">/200</span>
                        </div>
                        <div class="resource-item">
                            <span class="resource-label">Stability:</span>
                            <span id="stabilityAmount" class="resource-value">0</span><span class="resource-max">/50</span>
                        </div>
                    </div>
                    
                    <!-- Actions Section -->
                    <div class="actions-section">
                        <h3>Actions</h3>
                        <div class="action-grid">
                            <button id="generateHeatBtn" class="action-btn-small">Generate Heat</button>
                            <button id="generateFuelBtn" class="action-btn-small">Generate Fuel</button>
                            <button id="generateEnergyBtn" class="action-btn-small">Create Energy</button>
                        </div>
                    </div>
                </div>
                
                <!-- Right Content: Machine + Upgrades -->
                <div class="main-content">
                    <!-- Machine Area -->
                    <div class="machine-area">
                        <h2>The Machine</h2>
                        <canvas id="machineCanvas" width="550" height="280"></canvas>
                        <div class="machine-info">
                            <p>Worlds Created: <span id="worldsCreated">0</span></p>
                            <p>Machine Complexity: <span id="machineComplexity">0</span>%</p>
                        </div>
                    </div>
                    
                    <!-- Upgrades Section -->
                    <div class="upgrades-section">
                        <h3>Upgrades</h3>
                        <div class="upgrade-grid">
                            <div class="upgrade-item">
                                <div class="upgrade-header">
                                    <span>Heat Generator</span>
                                    <span class="upgrade-level">Level <span id="heatUpgradeLevel">0</span>/10</span>
                                </div>
                                <div class="upgrade-description">
                                    Increases base Heat generation by +2 per level. Heat is generated from world thermal energy and powers most machine systems.
                                </div>
                                <div class="upgrade-progress">
                                    <div class="progress-bar">
                                        <div id="heatUpgradeProgress" class="progress-fill"></div>
                                    </div>
                                </div>
                                <button id="upgradeHeatBtn" class="upgrade-btn">Upgrade (Cost: <span id="heatUpgradeCost">10</span> Heat)</button>
                            </div>
                            
                            <div class="upgrade-item">
                                <div class="upgrade-header">
                                    <span>Fuel Efficiency</span>
                                    <span class="upgrade-level">Level <span id="fuelUpgradeLevel">0</span>/10</span>
                                </div>
                                <div class="upgrade-description">
                                    Increases base Fuel generation by +1.5 per level. Fuel is extracted from world materials and required for creating new worlds.
                                </div>
                                <div class="upgrade-progress">
                                    <div class="progress-bar">
                                        <div id="fuelUpgradeProgress" class="progress-fill"></div>
                                    </div>
                                </div>
                                <button id="upgradeFuelBtn" class="upgrade-btn">Upgrade (Cost: <span id="fuelUpgradeCost">15</span> Fuel)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- World Generator Page -->
        <div id="worldsPage" class="page">
            <div class="worlds-header">
                <h2>World Generator</h2>
                <p class="worlds-description">Create and manage worlds to enhance your machine's capabilities</p>
            </div>
            
            <!-- World Status Section - Moved here from main page -->
            <div class="world-status-section">
                <h3>Current World Status</h3>
                <div id="currentWorldStatus" class="world-display">
                    <p>No world active</p>
                    <button id="unlockWorldsBtn" class="primary-btn disabled" style="display: block;" disabled>Need 100 Heat + 50 Fuel</button>
                </div>
                <!-- Weather Status Widget -->
                <div id="weatherWidget" class="weather-widget" style="display:none;">
                    <div class="weather-header">
                        <span id="weatherIcon" class="weather-icon">☁️</span>
                        <span id="weatherName" class="weather-name">Calm</span>
                    </div>
                    <div class="weather-body">
                        <div class="weather-bar-wrapper">
                            <div class="weather-bar">
                                <div id="weatherDurationFill" class="weather-bar-fill"></div>
                            </div>
                            <div class="weather-duration">
                                <span id="weatherDuration">10 turns</span>
                            </div>
                        </div>
                        <div class="weather-effects">
                            <span id="weatherEffects">+15% All | Stability +1</span>
                        </div>
                    </div>
                </div>
                <!-- Active Events Section -->
                <div id="activeEventsSection" class="active-events-section" style="display: none;">
                    <div class="active-events-title">Active Events</div>
                    <div id="activeEventsList"></div>
                </div>
            </div>
            
            <div class="worlds-content">
                <div class="world-generator-section">
                    <div class="generator-controls">
                        <button id="createWorldBtn" class="primary-btn">Create New World</button>
                        <div class="world-stats">
                            <span>Total Worlds Created: <strong id="totalWorldsCreated">0</strong></span>
                            <span>Active World Benefits: <span id="activeWorldBenefits">None</span></span>
                        </div>
                    </div>
                    
                    <div id="currentWorld" class="current-world-display">
                        <h3>Current Active World</h3>
                        <div class="world-details">
                            <p class="empty-world">No world currently active</p>
                        </div>
                    </div>
                </div>
                
                <div class="world-history-section">
                    <h3>World History</h3>
                    <div id="worldHistory" class="world-history-list">
                        <p class="empty-history">No worlds created yet</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Options Page -->
        <div id="optionsPage" class="page">
            <div class="options-header">
                <h2>Options</h2>
                <p class="options-description">Game settings and data management</p>
            </div>
            
            <div class="options-content">
                <div class="options-section">
                    <h3>Save & Data Management</h3>
                    <div class="option-group">
                        <div class="option-item">
                            <button id="saveGameBtn" class="option-btn primary-btn">Save Game</button>
                        </div>
                        
                        <div class="option-item">
                            <span class="option-label">Export Save Data</span>
                            <button id="exportSaveBtn" class="option-btn">Export</button>
                        </div>
                        
                        <div class="option-item">
                            <span class="option-label">Import Save Data</span>
                            <input type="file" id="importSaveFile" class="option-file" accept=".json" style="display:none;">
                            <button id="importSaveBtn" class="option-btn">Import</button>
                        </div>
                        
                        <div class="option-item">
                            <button id="loadGameBtn" class="option-btn">Load Game</button>
                        </div>
                        
                        <div class="option-item">
                            <button id="resetGameBtn" class="option-btn danger-btn">Reset Game</button>
                        </div>
                    </div>
                </div>
                
                <div class="options-section">
                    <h3>Audio Settings</h3>
                    <div class="option-group">
                        <label class="option-item">
                            <span class="option-label">Sound Effects</span>
                            <input type="checkbox" id="soundEffects" class="option-checkbox">
                        </label>
                        
                        <label class="option-item">
                            <span class="option-label">Background Music</span>
                            <input type="checkbox" id="backgroundMusic" class="option-checkbox">
                        </label>
                        
                        <label class="option-item">
                            <span class="option-label">Master Volume</span>
                            <input type="range" id="volumeSlider" class="option-slider" min="0" max="100" value="50">
                            <span id="volumeValue" class="option-value">50%</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements Page -->
        <div id="achievementsPage" class="page">
            <div class="achievements-header">
                <h2>Achievements</h2>
                <div class="achievements-progress-bar">
                    <div class="progress-bar">
                        <div id="achievementsProgress" class="progress-fill" style="width: 0%"></div>
                    </div>
                    <span class="progress-text">
                        <span id="achievementsUnlocked">0</span> / <span id="achievementsTotal">20</span> achievements unlocked
                    </span>
                </div>
            </div>
            
            <div class="achievements-content">
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Achievements will be dynamically populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- Achievement Tooltip -->
    <div id="achievementTooltip" class="achievement-tooltip">
        <h3 class="tooltip-title"></h3>
        <p class="tooltip-description"></p>
        <div class="tooltip-reward"></div>
        <div class="tooltip-progress"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/GameState.js"></script>
    <script type="module" src="js/ResourceSystem.js"></script>
    <script type="module" src="js/MachineSystem.js"></script>
    <script type="module" src="js/WorldSystem.js"></script>
    <script type="module" src="js/UpgradeSystem.js"></script>
    <script type="module" src="js/EventSystem.js"></script>
    <script type="module" src="js/UISystem.js"></script>
    <script type="module" src="js/Game.js"></script>
</body>
</html>
